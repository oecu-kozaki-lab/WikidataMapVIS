<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>国の選択リスト</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .form-container {
            display: flex;
            flex-direction: column;
            /* 縦に並べる */
            gap: 20px;
            /* 各項目の間にスペース */
            max-width: 400px;
            /* レイアウトの幅を制限 */
        }

        select {
            width: 100%;
            max-width: 400px;
            padding: 10px;
            font-size: 16px;
            border: 2px solid #007BFF;
            border-radius: 5px;
            background-color: #f9f9f9;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        select:disabled {
            background-color: #e9ecef;
            /* 無効なリストの背景色 */
            cursor: not-allowed;
        }
    </style>
    <script src="js/countries.js"></script>
    <script src="js/pref.js"></script>

</head>

<body>
    <div class="form-container">
        <div>
            <input type="radio" id="enableCountries" name="listToggle" checked>
            <label for="countries">国を選択:</label>
            <select id="countries" name="countries">
                <!-- JSONから動的に生成 -->
            </select>
        </div>
        <div>
            <input type="radio" id="enablePrefectures" name="listToggle">
            <label for="prefectures">都道府県を選択:</label>
            <select id="prefectures" name="prefectures">
                <!-- JSONから動的に生成 -->
            </select>
        </div>
        <!-- OKボタン -->
        <button id="okButton">OK</button>
        <!-- 結果を表示 -->
        <div id="result"></div>
    </div>

    <script>
        // 選択リストを生成する関数
        function populateCountryList() {
            const selectElement = document.getElementById('countries');

            countries.forEach(country => {
                // <option>要素を作成
                const option = document.createElement('option');
                option.value = country.item; // Qコードをvalueに設定
                option.textContent = country.itemLabel; // 国名を表示

                // デフォルトで日本を選択
                if (country.item === 'Q17') {
                    option.selected = true;
                }

                // <select>に追加
                selectElement.appendChild(option);
            });
        }

        // 選択リストを生成する関数
        function populatePrefectureList() {
            const selectElement = document.getElementById('prefectures');

            pref.forEach(prefecture => {
                // <option>要素を作成
                const option = document.createElement('option');
                option.value = prefecture.item; // Qコードをvalueに設定
                option.textContent = prefecture.itemLabel; // 都道府県名を表示

                // デフォルトで東京都を選択
                if (prefecture.item === 'Q1490') {
                    option.selected = true;
                }

                // <select>に追加
                selectElement.appendChild(option);
            });

            selectElement.disabled = true; // 都道府県リストを無効化
        }

        // ページ読み込み時に選択リストを生成
        populatePrefectureList();
        // ページ読み込み時に選択リストを生成
        populateCountryList();

        // 各リストとラジオボタンを取得
        const countriesRadio = document.getElementById('enableCountries');
        const prefecturesRadio = document.getElementById('enablePrefectures');
        const countriesSelect = document.getElementById('countries');
        const prefecturesSelect = document.getElementById('prefectures');
        const okButton = document.getElementById('okButton');
        const resultDiv = document.getElementById('result');

        // イベントリスナーを設定
        countriesRadio.addEventListener('change', () => {
            countriesSelect.disabled = false; // 国リストを有効化
            prefecturesSelect.disabled = true; // 都道府県リストを無効化
        });

        prefecturesRadio.addEventListener('change', () => {
            countriesSelect.disabled = true; // 国リストを無効化
            prefecturesSelect.disabled = false; // 都道府県リストを有効化
        });

        // OKボタンをクリックしたときの動作
        okButton.addEventListener('click', () => {
            let activeList, selectedOption;

            // アクティブなリストを判定
            if (!countriesSelect.disabled) {
                activeList = '国';
                selectedOption = countriesSelect.options[countriesSelect.selectedIndex];
            } else if (!prefecturesSelect.disabled) {
                activeList = '都道府県';
                selectedOption = prefecturesSelect.options[prefecturesSelect.selectedIndex];
            }

            // 選択されたラベルと値を表示
            resultDiv.textContent = `${activeList}: ${selectedOption.text} (value: ${selectedOption.value})`;
        });
    </script>
</body>

</html>